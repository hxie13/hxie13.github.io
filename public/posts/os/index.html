<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" Modern Operating Systems, Fourth Edition &middot;  译码为梦" />
  
    <meta name="theme-color" content="#hexcolor" />
  
  <meta property="og:site_name" content="译码为梦" />
  <meta property="og:url" content="https://hxie13.github.io/public/posts/os/" />
  
  
    <meta property="og:type" content="article" />
    
    <meta property="og:article:published_time" content="2022-02-14T20:46:30&#43;08:00" />
    
  

  <title>
     Modern Operating Systems, Fourth Edition &middot;  译码为梦
  </title>

  <link rel="alternative stylesheet" href="https://hxie13.github.io/public/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://hxie13.github.io/public/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://hxie13.github.io/public/css/main.css" />
  <link rel="stylesheet" href="https://hxie13.github.io/public/css/github.css" />
  <link rel="stylesheet" href="https://hxie13.github.io/public/css/color-theme.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type="text/css">
  <link rel="shortcut icon" href="https://hxie13.github.io/public/images/favicon.ico" />
  <link rel="apple-touch-icon" href="https://hxie13.github.io/public/images/apple-touch-icon.png" />

  

  
</head>

<body>

  
  <header class="global-header"  style="background-image:url(https://hxie13.github.io/public/images/pg.jpg)">
  
    <section class="header-text">
      <h1><a href="https://hxie13.github.io/public/">译码为梦</a></h1>
      
        <h3 class="tag-line">
          网络后端开发学习路线记录
        </h3>
      
 

      
        
        <a class="btn btn-default btn-home" href="https://hxie13.github.io/public/">
          <i class="fa fa-angle-left" aria-hidden="true"></i>
          &nbsp;主页
        </a>
        
      
      
      <div class="navbar-container">

        

        
          <a class="btn btn-default navbar-item" href="https://hxie13.github.io/public/posts/os">
            ARCHIVES
          </a>
        

        
          <a class="btn btn-default navbar-item" href="https://hxie13.github.io/public/pages/about">
            ABOUT
          </a>
        

        
          <a class="btn btn-default navbar-item" href="https://hxie13.github.io/public/posts/os">
            HOME
          </a>
        

      </div>
      
      
      
      
      
      
      
      
      
      
      
    </section>
    
  </header>
  <main class="container">

</body>




<article>
  <header class="article-title">
    <h1 class="text-primary">Modern Operating Systems, Fourth Edition</h1>
  </header>
  <div class="delimiter"></div>
  <section>
    <h2 id="1-绪论">1. 绪论</h2>
<p>计算机为管理物理部件并加以优化使用而安装的一层软件，称为<strong>操作系统</strong>.</p>
<table>
    <tr>
        <th rowspan="2", align="center">用户态</th>
        <td>浏览器</td>
        <td>音乐播放器</td>
        <td>电子邮件</td>
        <th rowspan="3">软件</th>
    </tr>
    <tr>
        <td colspan="3", align="center">用户接口程序</td>
    </tr>
    <tr>
        <th>内核态</th>
        <td colspan="3", align="center">操作系统</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3", bgcolor="gray"></td>
        <th>硬件</th>
    </tr>
</table>
<ul>
<li>用户接口程序包括：<strong>shell</strong>(基于文本)、<strong>GUI</strong>(基于图形用户界面).</li>
<li>计算机有两种运行模式：<code>内核态</code>和<code>用户态</code>，软件中最基础的部分是操作系统，其运行在内核态，可以执行任何机器指令，对所有硬件拥有完全访问权；用户态下的软件仅使用了机器指令中的一个子集，无法使用那些会影响机器控制或可进行<strong>I/O</strong>操作的指令.</li>
<li>但在一些系统中，用户态下运行的程序会协助操作系统完成特权功能，但该程序不是操作系统的一部分，也不在内核态下运行.</li>
<li>Linux参考UNIX模式编写，但具有全新的代码基础.</li>
</ul>
<h3 id="11-操作系统的功能">1.1 操作系统的功能</h3>
<p>操作系统是运行在内核态的软件，有两个基本上独立的任务，为程序员提供一个资源集的清晰抽象，并管理这些硬件资源。</p>
<h3 id="111-作为扩展机器的操作系统">1.1.1 作为扩展机器的操作系统</h3>
<p>一种自顶向下的观点，操作系统是向应用程序提供基本抽象的概念.</p>
<ul>
<li>硬盘驱动：实现软件与硬件的交互，提供读写硬盘块的接口.</li>
<li>抽象：将任务划分为两部分，有关抽象的定义和实现；随时用这些抽象解决问题. 通过操作系统，隐藏硬件，对外呈现出良好、清晰、优雅、一致的接口.</li>
</ul>
<h3 id="112-作为资源管理者的操作系统">1.1.2 作为资源管理者的操作系统</h3>
<p>一种自底向上的观点，操作系统管理着一个复杂系统的各个部分，其任务在于在相互竞争的程序之间有序控制对处理器、存储器以及其它<strong>I/O</strong>接口设备的分配.</p>
<ul>
<li>例如：多个应用程序试图在同一台打印机上输出计算结果，使用磁盘上缓存区的方法，操作系统接受多个程序的输出，在一个程序输出结束后，有序打印暂存于缓存区的文件.</li>
</ul>
<p>当一个计算机有多个用户时，管理和保护存储器、<strong>I/O</strong>接口设备以及其它资源的需求变得强烈起来，因为用户间可能会相互干扰。在这个角度出发看待操作系统，其任务就是<strong>记录哪个程序在使用什么资源，对资源请求进行分配，评估使用代价，并且为不同程序和用户调节相互冲突的资源请求</strong>.</p>
<hr>
<ul>
<li>资源管理的方式：时间和空间上的多路复用(共享)资源机制.</li>
<li>时间上的复用(打印机及CPU等资源的使用).</li>
<li>空间上的复用(在若干个运行程序之间分割内存，特别是当一个程序只需要整个内存的一小部分时;磁盘为不同用户保存文件).</li>
</ul>
<p>几个重要概念</p>
<ul>
<li>批处理系统</li>
<li>多道程序设计</li>
<li>分时系统</li>
<li>IEEE提出一个UNIX标准，称为<strong>POSIX</strong>，凡是UNIX必须支持的小型系统调用接口.</li>
</ul>
<h3 id="13-计算机硬件">1.3 计算机硬件</h3>
<ul>
<li>处理器：CPU从内存中取出指令并执行，顺序是，取指，解码，执行.</li>
</ul>
<p>每个CPU都有一套可执行的专门指令集，x86处理器不能执行ARM程序。由于访问内存以得到指令或数据的时间比执行指令花费时间更长，CPU内部有一些保存关键变量和临时数据的寄存器.</p>
<hr>
<p>除了保存变量和临时结果的通用寄存器外，还有一些对程序员可见的专用寄存器，例如，</p>
<ul>
<li><strong>程序计数器</strong>，用以保存将要取出的下一条指令的内存地址，在指令取出后被更新以指向后继的指令.</li>
<li><strong>堆栈指针</strong>，指向内存中当前栈的顶端.</li>
<li><strong>程序状态字(PWS)</strong>，包含条件码位、CPU优先级、模式(用户态或内核态)，以及其它控制位；该寄存器在系统调用和<strong>I/O</strong>中很重要.</li>
<li>流水线：CPU拥有单独的取值、解码和执行单元，在多数流水线设计中，当一条指令被取进流水线中，它必须被执行完毕，会造成机器实现软件的复杂性问题.</li>
<li>超标量CPU：提供多个执行单元，取来的指令暂存于缓冲区内，当执行单元有空闲，检查缓冲区内是否还有未执行的指令；这种设计导致指令执行顺序得不到保障.</li>
<li>为从操作系统中获得服务，用户程序借助系统调用以陷入内核，使用<strong>TRAP</strong>指令，是一个特别的过程调用指令，能从用户态切换至内核态.</li>
</ul>
<hr>
<h2 id="2-进程与线程">2. 进程与线程</h2>
<p>进程是操作系统中最核心概念，是对正在运行程序的抽象，是计算机支持(伪)并发操作的基础。</p>
<h3 id="21-进程">2.1 进程</h3>
<p>并发场景：</p>
<ul>
<li>网络服务器响应多个网页请求，需要先检查缓存中是否有请求的网页内容，若有响应返回，若无则启动磁盘请求获取网页；后一步骤耗时较长，可以在等待缓存请求完成之前，发起其它网页请求响应或发起对其它磁盘的缓存请求；</li>
<li>个人PC在系统启动时，会开启许多进程，如邮件接受进程，病毒库更新进程；</li>
</ul>
<p>单CPU进程并发是通过多道程序设计，进程切换完成的，是伪并行；而多处理器系统能实现真正硬件并发(多个CPU共享同一物理内存)。</p>
<h3 id="211-进程模型">2.1.1 进程模型</h3>
<p>计算机所有可运行软件被组织成若干顺序进程(Sequential Process)，简称进程。一个进程是一个正在执行程序的实例，拥有程序计数器，寄存器，和变量的当前值。伪并行机制是通过<code>多道程序设计</code>(CPU在程序间快速切换)完成的。</p>
<ul>
<li>逻辑程序计数器和物理程序计数器。多道程序执行，由同一个物理程序计数器控制，但可以抽象成各自拥有独立的进程，包括有各自的逻辑程序计数器。</li>
<li>当程序运行时，逻辑程序计数器被装入实际物理程序计数器中，该进程时间片结束后，物理程序计数器被保存在内存中该进程的逻辑程序计数器中；各进程快速切换，伴随物理与逻辑寄存器的快速数据交换。</li>
<li>进程与程序间的区别。程序是食谱，CPU是厨师，数据输入是食物原料，进程是厨师阅读食谱，制作食物一系列动作的总和。</li>
<li>进程切换概念类比。厨师正在做饭，其儿子被蜜蜂蛰了，厨师记录他当前时刻照食谱做到哪了(保存进程当前状态)，然后拿出急救手册(另一程序)按照其中指示处理蛰伤(新的进程)；待处理好蛰伤后，转而按照前面记录的进度继续做饭；</li>
</ul>
<h3 id="212-进程的创建">2.1.2 进程的创建</h3>
<p>四种主要事件导致进程的创建：</p>
<ul>
<li>系统初始化；</li>
<li>程序系统调用创建进程；</li>
<li>用户请求创建进程(打开新的程序对象，也即程序实例化)；</li>
<li>批处理作业初始化；</li>
</ul>
<p>停留在后台处理与特定用户无关系的活动的进程称为守护进程(daemon)，unix中ps可以查看正在运行的进程。</p>
<ul>
<li>UNIX系统中，只有一个系统调用可以创建进程：<code>fork</code>，会创建一个与调用进程相同的副本，父子进程拥有相同的内存映像，相同的环境字符串和同样的打开文件。</li>
<li>进程创建之后，父子进程拥有各自不同的地址空间，发生在各自地址空间上的修改对其它进程不可见。</li>
<li>UNIX中，子进程的初始地址空间是父进程的一个副本，但包含两个不同的地址空间，其中不可写的内存区是共享的：
<ul>
<li>如某些UNIX使程序在父子进程间共享，因为它不能被修改；</li>
<li>子进程共享父进程所有内存，但是内存是通过写时复制共享，意味着一旦两者之一想要修改部分内存，这块内存首先被明确的复制，以确保修改发生在私有内存区域；</li>
</ul>
</li>
</ul>

  </section>
  <div class="clearfix">
    
      <div class="post-date pull-left">
        <span class="small">
          Posted on
          Feb 14, 2022 at 20:46
        </span>
      </div>
    
    <div class="pull-right">
      
    </div>
  </div>
  <footer>
    
	
   
    <div class="delimiter"></div>
    <div class="pager-container">
      
        <a class="btn btn-primary btn-older-posts" href="https://hxie13.github.io/public/posts/tutorialhugo/">
          <div>
            <span aria-hidden="true">&larr;</span> Older Posts
          </div>
        </a>
      
      
        <a class="btn btn-primary btn-newer-posts" href="https://hxie13.github.io/public/posts/expinterview/">
          <div>
            Newer Posts <span aria-hidden="true">&rarr;</span>
          </div>
        </a>
      
         
    </div>
  </footer>
</article>
<div class="delimiter"></div>

  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      &copy; BSD license
    </div>
    <div class="sns-links hidden-print">
  
  
    <a href="https://twitter.com/None" target="_blank">
      <i class="fa fa-twitter"></i>
    </a>
    
  
  
  
  
    <a href="https://github.com/hxie13" target="_blank">
      <i class="fa fa-github"></i>
    </a>
  
  
  
  
  
  
  
</div>

  </footer>
  


  
  
  

  
  

  
</body>
</html>

